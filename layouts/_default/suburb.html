<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {{ $desc := printf "Explore %s, located in %s. Discover information about this suburb, including its postcode, latitude, and longitude." .Title .Params.state }}
    {{ with .Lastmod }}{{ $desc = printf "%s Last updated: %s." $desc (.Format "January 2, 2006") }}{{ end }}
    <meta name="description" content="{{ $desc }}">
    <meta name="keywords" content="{{ .Title }}, {{ .Params.state }}, suburb directory, Australian suburbs">
    <title>{{ .Title }} - {{ .Params.state }}</title>
    <link rel="stylesheet" href="{{ "css/style.css" | relURL }}">
</head>
<body>
    <header>
        <h1>{{ .Title }}</h1>
        <p>State: {{ .Params.state }}</p>
        <p>Postcode: {{ .Params.postcode }}</p>
        {{ with .Lastmod }}
        <p class="last-updated">Last Updated: {{ .Format "January 2, 2006" }}</p>
        {{ end }}
    </header>
    <main>
        {{/* --- Embedded Map Section --- */}}
        {{ if .Params.state }}
        <section class="map-section">
            <h3>Location Map</h3>
            {{ $suburb := .Title }}
            {{ $state := .Params.state }}
            {{ $query := printf "%s, %s" $suburb $state }}
            {{ $mapURL := printf "https://maps.google.com/maps?q=%s&hl=en&output=embed" ($query | urlquery) }}
            <div class="map-container">
                 <iframe
                    width="100%" height="300" style="border:0; border-radius: 8px;"
                    loading="lazy" allowfullscreen="" referrerpolicy="no-referrer-when-downgrade"
                    title="Map location for {{ $query }}" src="{{ $mapURL | safeURL }}">
                </iframe>
            </div>
        </section>
        {{ end }}
        {{/* --- End Embedded Map Section --- */}}
        <!-- <section class="about-section">
            <h2>About {{ .Title }}</h2>
            <p>{{ .Title }} is located in {{ .Params.state }}.</p>
            <ul>
                <li>Latitude: {{ .Params.latitude | default "N/A" }}</li>
                <li>Longitude: {{ .Params.longitude | default "N/A" }}</li>
            </ul>
        </section> -->

        {{/* --- Display Facts if they exist --- */}}
        {{ with .Params.facts }}
            {{ if gt (len .) 0 }}
            <section class="facts-section">
                <h3>Facts about {{ $.Title }}</h3>
                <ol> {{/* Use ordered list for "top 10" */}}
                    {{ range . }}
                    <li>{{ . }}</li>
                    {{ end }}
                </ol>
            </section>
            {{ end }}
        {{ end }}
        {{/* --- End Facts Section --- */}}

        {{/* --- Display Tourist Locations if they exist --- */}}
        {{ with .Params.tourist_locations }}
             {{ if gt (len .) 0 }}
            <section class="locations-section">
                <h3>Tourist Locations near {{ $.Title }}</h3>
                 <ol> {{/* Use ordered list for "top 10" */}}
                    {{ range . }}
                    <li>{{ . }}</li>
                    {{ end }}
                </ol>
            </section>
             {{ end }}
        {{ end }}
        {{/* --- End Tourist Locations Section --- */}}

        {{/* --- Display Notable People if they exist --- */}}
        {{ with .Params.notable_people }}
            {{ if gt (len .) 0 }}
            <section class="notable-people-section">
                <h3>Notable People from {{ $.Title }}</h3>
                <ul>
                    {{ range . }}
                    <li>{{ . }}</li>
                    {{ end }}
                </ul>
            </section>
            {{ end }}
        {{ end }}
        {{/* --- End Notable People Section --- */}}

        {{/* --- Display Historical Events if they exist --- */}}
        {{ with .Params.historical_events }}
            {{ if gt (len .) 0 }}
            <section class="historical-events-section">
                <h3>Notable Historical Events in {{ $.Title }}</h3>
                <ul>
                    {{ range . }}
                    <li>{{ . }}</li>
                    {{ end }}
                </ul>
            </section>
            {{ end }}
        {{ end }}
        {{/* --- End Historical Events Section --- */}}
    </main>
    <footer>
        <p>Â© {{ now.Format "2006" }} Australian Suburb Directory</p>
    </footer>
</body>
</html>